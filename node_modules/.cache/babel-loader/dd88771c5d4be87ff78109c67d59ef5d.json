{"remainingRequest":"C:\\Users\\shuto-keisuke\\Desktop\\project\\02_kotlinpracticefront\\front\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\shuto-keisuke\\Desktop\\project\\02_kotlinpracticefront\\front\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\shuto-keisuke\\Desktop\\project\\02_kotlinpracticefront\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\shuto-keisuke\\Desktop\\project\\02_kotlinpracticefront\\front\\src\\views\\BookDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\shuto-keisuke\\Desktop\\project\\02_kotlinpracticefront\\front\\src\\views\\BookDetail.vue","mtime":1619756249517},{"path":"C:\\Users\\shuto-keisuke\\Desktop\\project\\02_kotlinpracticefront\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\shuto-keisuke\\Desktop\\project\\02_kotlinpracticefront\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\shuto-keisuke\\Desktop\\project\\02_kotlinpracticefront\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\shuto-keisuke\\Desktop\\project\\02_kotlinpracticefront\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkYXRhT2JqOiB7fSwKICAgICAgcmVudGFsSW5mbzoge30KICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBheGlvcy5nZXQoImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9ib29rL2RldGFpbC8iLmNvbmNhdCh0aGlzLiRyb3V0ZS5wYXJhbXNbJ2lkJ10pLCB7CiAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZQogICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICBfdGhpcy5kYXRhT2JqID0gcmVzcG9uc2UuZGF0YTsKICAgICAgX3RoaXMucmVudGFsSW5mbyA9IF90aGlzLmRhdGFPYmoucmVudGFsX2luZm87CiAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGRlbGV0ZVJlY29yZDogZnVuY3Rpb24gZGVsZXRlUmVjb3JkKCkgewogICAgICBpZiAoY29uZmlybSgiXHU2NkY4XHU3QzRESUQ6ICIuY29uY2F0KHRoaXMuZGF0YU9iai5pZCwgIiBcdTMwNkVcdTY2RjhcdTdDNERcdTMwOTJcdTUyNEFcdTk2NjRcdTMwNTdcdTMwN0VcdTMwNTlcdTMwNEI/IikpKSB7CiAgICAgICAgYXhpb3MuZGVsZXRlKCJodHRwOi8vbG9jYWxob3N0OjgwODAvYWRtaW4vYm9vay9kZWxldGUvIi5jb25jYXQodGhpcy5kYXRhT2JqLmlkKSwgewogICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCItLS0tLSBzdWNjZXNzIC0tLS0tIik7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2FkbWluL2Jvb2svZGVsZXRlL2NvbXBsZXRlZCcpOwogICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGEudG9rZW47CiAgICAgICAgfS5iaW5kKHRoaXMpKS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCItLS0tLSBlcnJvciAtLS0tLSIpOwogICAgICAgICAgYWxlcnQoIuabuOexjeOBr+WtmOWcqOOBl+OBvuOBm+OCkyIpOwoKICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZSkgewogICAgICAgICAgICBjb25zb2xlLmxvZygiLS0tLS0gcmVzcG9uc2UgLS0tLS0iKTsKICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLnJlc3BvbnNlLnN0YXR1cyk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLnJlc3BvbnNlLmhlYWRlcnMpOwogICAgICAgICAgfSBlbHNlIGlmIChlcnJvci5yZXF1ZXN0KSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCItLS0tLSByZXF1ZXN0IC0tLS0tIik7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJlcnJvcjogcmVxdWVzdCIpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29uc29sZS5sb2coIi0tLS0tIGVsc2UgLS0tLS0iKTsKICAgICAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yJywgZXJyb3IubWVzc2FnZSk7CiAgICAgICAgICB9CgogICAgICAgICAgY29uc29sZS5sb2coIi0tLS0tIGNvbmZpZyAtLS0tLSIpOwogICAgICAgICAgY29uc29sZS5sb2coZXJyb3IuY29uZmlnKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIHJlbnRhbFRoaXNCb29rOiBmdW5jdGlvbiByZW50YWxUaGlzQm9vaygpIHsKICAgICAgY29uc29sZS5sb2coIi0tLS0tIG1ldGhvZCByZW50YWwgd2FzIGNhbGxlZCAtLS0tLSIpOwoKICAgICAgaWYgKGNvbmZpcm0oIuOBk+OBruacrOOCkuWAn+OCiuOBvuOBmeOBi++8nyIpKSB7CiAgICAgICAgYXhpb3MucG9zdCgiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3JlbnRhbC9zdGFydCIsIHsKICAgICAgICAgIGJvb2tfaWQ6IHRoaXMuZGF0YU9iai5pZAogICAgICAgIH0sIHsKICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiLS0tLS0gc3VjY2VzcyAtLS0tLSIpOwogICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgICAgdGhpcy4kcm91dGVyLmdvKHsKICAgICAgICAgICAgcGF0aDogdGhpcy4kcm91dGVyLmN1cnJlbnRSb3V0ZS5wYXRoLAogICAgICAgICAgICBmb3JjZTogdHJ1ZQogICAgICAgICAgfSk7CiAgICAgICAgfS5iaW5kKHRoaXMpKS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCItLS0tLSBlcnJvciAtLS0tLSIpOwogICAgICAgICAgYWxlcnQoIuOCouODl+ODquOCseODvOOCt+ODp+ODs+OBjOODkOOCsOOBo+OBpuOCi+WPr+iDveaAp+OBjC4uLiIpOwoKICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZSkgewogICAgICAgICAgICBjb25zb2xlLmxvZygiLS0tLS0gcmVzcG9uc2UgLS0tLS0iKTsKICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLnJlc3BvbnNlLnN0YXR1cyk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLnJlc3BvbnNlLmhlYWRlcnMpOwogICAgICAgICAgfSBlbHNlIGlmIChlcnJvci5yZXF1ZXN0KSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCItLS0tLSByZXF1ZXN0IC0tLS0tIik7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJlcnJvcjogcmVxdWVzdCIpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29uc29sZS5sb2coIi0tLS0tIGVsc2UgLS0tLS0iKTsKICAgICAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yJywgZXJyb3IubWVzc2FnZSk7CiAgICAgICAgICB9CgogICAgICAgICAgY29uc29sZS5sb2coIi0tLS0tIGNvbmZpZyAtLS0tLSIpOwogICAgICAgICAgY29uc29sZS5sb2coZXJyb3IuY29uZmlnKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"sources":["BookDetail.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div>\r\n        <h3>書籍詳細</h3>\r\n        <table>\r\n            <thead>\r\n                <tr>\r\n                    <th>タイトル</th>\r\n                    <th>著者</th>\r\n                    <th>発売日</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr>\r\n                    <td>{{ dataObj.title }}</td>\r\n                    <td>{{ dataObj.author }}</td>\r\n                    <td>{{ dataObj.release_date }}</td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n        <router-link :to=\"{name: 'adminUpdate', params: {id: dataObj.id}}\">更新</router-link><br>\r\n        <a href=\"#\" @click.prevent=\"deleteRecord\">削除</a><br>\r\n        <a  v-if=\"dataObj.rental_info === null\" href=\"#\" @click.prevent=\"rentalThisBook\" >貸出</a><br>\r\n        <div v-if=\"dataObj.rental_info !== null\">\r\n            <h3>貸出情報</h3>\r\n        <table>\r\n            <thead>\r\n                <tr>\r\n                    <th>貸出ユーザーID</th>\r\n                    <th>貸出日</th>\r\n                    <th>返却予定日</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr>\r\n                    <td>{{ rentalInfo.user_id }}</td>\r\n                    <td>{{ rentalInfo.rental_datetime }}</td>\r\n                    <td>{{ rentalInfo.return_deadline }}</td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n        <a href=\"\">返却</a><br>\r\n        </div>\r\n        <br>\r\n        <router-link to=\"/book/list\">一覧へ戻る</router-link>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            dataObj: {},\r\n            rentalInfo: {}\r\n        }\r\n    },\r\n    mounted: function() {\r\n        axios.get(`http://localhost:8080/book/detail/${this.$route.params['id']}`, {withCredentials: true})\r\n            .then(response => {\r\n                console.log(response)\r\n                this.dataObj = response.data\r\n                this.rentalInfo = this.dataObj.rental_info\r\n            })\r\n    },\r\n    methods: {\r\n        deleteRecord() {\r\n            if (confirm(`書籍ID: ${this.dataObj.id} の書籍を削除しますか?`)) {\r\n                axios.delete(`http://localhost:8080/admin/book/delete/${this.dataObj.id}`, {withCredentials: true})\r\n                .then( function(response) {\r\n                    console.log(\"----- success -----\")\r\n                    console.log(response)\r\n                    this.$router.push('/admin/book/delete/completed')\r\n                    return response.data.token\r\n                }.bind(this) ).catch( error => {\r\n                    console.log(\"----- error -----\")\r\n                alert(\"書籍は存在しません\")\r\n                if (error.response) {\r\n                    console.log(\"----- response -----\")\r\n                    console.log(error.response.data)\r\n                    console.log(error.response.status)\r\n                    console.log(error.response.headers)\r\n                } else if (error.request) {\r\n                    console.log(\"----- request -----\")\r\n                    console.log(\"error: request\")\r\n                } else {\r\n                    console.log(\"----- else -----\")\r\n                    console.log('Error', error.message)\r\n                }\r\n                console.log(\"----- config -----\")\r\n                console.log(error.config)\r\n                } )\r\n            }\r\n            \r\n        },\r\n        rentalThisBook() {\r\n            console.log(\"----- method rental was called -----\")\r\n            if(confirm(\"この本を借りますか？\")){\r\n                axios.post(\"http://localhost:8080/rental/start\",\r\n                        {book_id: this.dataObj.id},\r\n                        {withCredentials: true})\r\n                .then(function(response) {\r\n                    console.log(\"----- success -----\")\r\n                    console.log(response)\r\n                    this.$router.go({path: this.$router.currentRoute.path, force: true})\r\n                }.bind(this))\r\n                .catch(error => {\r\n                    console.log(\"----- error -----\")\r\n                    alert(\"アプリケーションがバグってる可能性が...\")\r\n                    if (error.response) {\r\n                        console.log(\"----- response -----\")\r\n                        console.log(error.response.data)\r\n                        console.log(error.response.status)\r\n                        console.log(error.response.headers)\r\n                    } else if (error.request) {\r\n                        console.log(\"----- request -----\")\r\n                        console.log(\"error: request\")\r\n                    } else {\r\n                        console.log(\"----- else -----\")\r\n                        console.log('Error', error.message)\r\n                    }\r\n                    console.log(\"----- config -----\")\r\n                    console.log(error.config)\r\n                })\r\n            }\r\n            \r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\nh3 {\r\n    margin-bottom: 5px;\r\n}\r\n\r\ntable, th, td {\r\n    border: 1px solid black\r\n}\r\n\r\ntable {\r\n    margin: 0 auto;\r\n}\r\n</style>"],"sourceRoot":"src/views"}]}